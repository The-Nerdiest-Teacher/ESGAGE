<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<script data-gage-theme-init="true">(function(){try{var t=localStorage.getItem("gage-theme");if(!t){t=(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)?"dark":"light";}if(t==="dark"){document.documentElement.classList.add("dark-mode");}}catch(e){}})();</script>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Nos Cours | École secondaire Gaétan-Gervais</title>
<link href="assets/img/favicon.png" rel="icon"/>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Raleway:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet"/>
<link href="assets/vendor/aos/aos.css" rel="stylesheet"/>
<link href="assets/css/main.css" rel="stylesheet"/>
<style>
.cours-section { padding: 40px 20px 60px; }

/* TABS */
.subject-nav { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:36px; justify-content:center; }
.subject-tab {
  display:inline-flex; align-items:center; gap:7px; padding:9px 18px;
  border-radius:30px; border:2px solid color-mix(in srgb,var(--default-color),transparent 78%);
  background:transparent; color:var(--default-color);
  font-family:'Raleway',sans-serif; font-weight:700; font-size:13px;
  cursor:pointer; transition:all 0.2s; white-space:nowrap;
}
.subject-tab:hover { border-color:var(--accent-color); color:var(--accent-color); }
.subject-tab.active { background:var(--accent-color); border-color:var(--accent-color); color:#fff; }

/* PANELS */
.subject-panel { display:none; }
.subject-panel.active { display:block; }

/* GRADE HEADER */
.grade-header-row {
  display:grid; grid-template-columns:repeat(4,1fr);
  border-bottom:2px solid color-mix(in srgb,var(--default-color),transparent 85%);
}
.grade-header { text-align:center; padding:14px 8px 16px; position:relative; }
.grade-header::after {
  content:''; position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  width:36px; height:3px; background:var(--accent-color); border-radius:2px;
}
.grade-label { font-family:'Bebas Neue',sans-serif; font-size:22px; letter-spacing:3px; color:var(--accent-color); display:block; }
.grade-sub { font-family:'Raleway',sans-serif; font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:1px; color:var(--default-color); opacity:.4; }

/* PATHWAY ROWS — each row is a grid of 4 columns */
.pathway-wrap { position:relative; }
.pathway-svg { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; overflow:visible; }

.pathway-row {
  display:grid; grid-template-columns:repeat(4,1fr);
  border-bottom:1px solid color-mix(in srgb,var(--default-color),transparent 90%);
  align-items:start; padding:6px 0;
}
.pathway-row.no-border { border-bottom:none; padding-top:0; }
.pathway-row.tight { padding:2px 0; }

/* Full-width badge */
.pathway-label-row { grid-column:1/-1; padding:8px 8px 4px; }
.pbadge {
  display:inline-flex; align-items:center; gap:6px;
  font-family:'Raleway',sans-serif; font-weight:700;
  font-size:11px; letter-spacing:1.2px; text-transform:uppercase;
  padding:4px 12px; border-radius:20px;
}
.pb-u { background:#e3f2fd; color:#1565c0; }
.pb-c { background:#e8f5e9; color:#2e7d32; }
.pb-o { background:#fff3e0; color:#e65100; }
.pb-e { background:#f3e5f5; color:#6a1b9a; }
html.dark-mode .pb-u { background:rgba(25,118,210,.18); color:#90caf9; }
html.dark-mode .pb-c { background:rgba(56,142,60,.18); color:#a5d6a7; }
html.dark-mode .pb-o { background:rgba(230,81,0,.18); color:#ffcc80; }
html.dark-mode .pb-e { background:rgba(123,31,162,.18); color:#ce93d8; }

/* CELLS */
.cell { padding:8px 12px; display:flex; align-items:center; min-height:72px; }
.cell-empty { padding:8px 12px; min-height:72px; }

/* PILLS */
.pill {
  background:var(--surface-color);
  border:2px solid color-mix(in srgb,var(--default-color),transparent 82%);
  border-radius:10px; padding:9px 13px;
  transition:border-color .2s, transform .2s, box-shadow .2s;
  width:100%;
}
.pill:hover { border-color:var(--pc,var(--accent-color)); transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.1); }
.pcode { font-family:'Bebas Neue',sans-serif; font-size:16px; letter-spacing:1px; color:var(--pc,var(--accent-color)); line-height:1; display:block; }
.pname { font-family:'Raleway',sans-serif; font-size:11px; font-weight:600; color:var(--default-color); opacity:.6; text-transform:uppercase; letter-spacing:.3px; margin-top:3px; display:block; }

.cu { --pc:#1976d2; }
.cc { --pc:#388e3c; }
.co { --pc:#e65100; }
.ce { --pc:#7b1fa2; }

.path-spacer { height:6px; }

/* Legend */
.lbox { background:var(--surface-color); border-radius:14px; padding:24px 28px; border:1px solid color-mix(in srgb,var(--default-color),transparent 88%); }
.lgrid { display:flex; flex-wrap:wrap; gap:10px; }
.litem { display:flex; align-items:center; gap:8px; background:color-mix(in srgb,var(--default-color),transparent 93%); border-radius:8px; padding:6px 12px; }
.lcode { font-family:'Bebas Neue',sans-serif; font-size:20px; color:var(--accent-color); width:18px; text-align:center; line-height:1; }
.ldesc { font-family:'Raleway',sans-serif; font-size:13px; font-weight:600; color:var(--default-color); }

@media(max-width:768px){
  .grade-header-row,.pathway-row { grid-template-columns:repeat(2,1fr); }
}
@media(max-width:480px){
  .grade-header-row,.pathway-row { grid-template-columns:1fr; }
}
</style>
</head>
<body class="starter-page-page">
<div id="header-placeholder"></div>
<script src="assets/js/include-header.js"></script>
<main class="main">

<div class="page-title" data-aos="fade">
  <div class="heading"><div class="container">
    <div class="row d-flex justify-content-center text-center">
      <div class="col-lg-8">
        <div style="margin-bottom:12px;"><i class="bi bi-book-fill" style="font-size:52px;color:var(--accent-color);"></i></div>
        <h1>Nos Cours</h1>
        <p class="mb-0">Explorez les cours offerts de la 7<sup>e</sup> à la 12<sup>e</sup> année.</p>
      </div>
    </div>
  </div></div>
  <nav class="breadcrumbs"><div class="container"><ol>
    <li><a href="/ESGAGE/index.html">Accueil</a></li>
    <li><a href="/ESGAGE/academique.html">Académique</a></li>
    <li class="current">Cours</li>
  </ol></div></nav>
</div>

<!-- LEGEND -->
<section class="section light-background">
  <div class="container">
    <div class="row gy-4 align-items-center">
      <div class="col-lg-7" data-aos="fade-up">
        <div class="lbox">
          <h5 style="font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:1px;margin-bottom:16px;color:var(--heading-color);">Comment lire un code de cours</h5>
          <div style="background:color-mix(in srgb,var(--accent-color),transparent 90%);border-radius:10px;padding:14px 20px;display:flex;align-items:center;gap:20px;flex-wrap:wrap;margin-bottom:16px;">
            <span style="font-family:'Bebas Neue',sans-serif;font-size:32px;letter-spacing:5px;color:var(--accent-color);">FRA 2 D</span>
            <div style="display:flex;gap:20px;">
              <div style="text-align:center;"><span style="font-size:10px;font-family:'Raleway',sans-serif;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--default-color);opacity:.55;display:block;">Matière</span><span style="font-family:'Bebas Neue',sans-serif;font-size:22px;color:var(--accent-color);">FRA</span></div>
              <div style="text-align:center;"><span style="font-size:10px;font-family:'Raleway',sans-serif;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--default-color);opacity:.55;display:block;">Année</span><span style="font-family:'Bebas Neue',sans-serif;font-size:22px;color:var(--accent-color);">2</span></div>
              <div style="text-align:center;"><span style="font-size:10px;font-family:'Raleway',sans-serif;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--default-color);opacity:.55;display:block;">Type</span><span style="font-family:'Bebas Neue',sans-serif;font-size:22px;color:var(--accent-color);">D</span></div>
            </div>
          </div>
          <div class="lgrid">
            <div class="litem"><span class="lcode">P</span><span class="ldesc">Appliquée</span></div>
            <div class="litem"><span class="lcode">D</span><span class="ldesc">Théorique</span></div>
            <div class="litem"><span class="lcode">O</span><span class="ldesc">Ouvert</span></div>
            <div class="litem"><span class="lcode">U</span><span class="ldesc">Pré-Universitaire</span></div>
            <div class="litem"><span class="lcode">C</span><span class="ldesc">Pré-Collégiale</span></div>
            <div class="litem"><span class="lcode">M</span><span class="ldesc">Mixte</span></div>
            <div class="litem"><span class="lcode">W</span><span class="ldesc">Cours de départ</span></div>
            <div class="litem"><span class="lcode">L</span><span class="ldesc">Niveau essentiel</span></div>
            <div class="litem"><span class="lcode">E</span><span class="ldesc">Essentiel</span></div>
            <div class="litem"><span class="lcode">A</span><span class="ldesc">BI</span></div>
          </div>
        </div>
      </div>
      <div class="col-lg-5" data-aos="fade-up" data-aos-delay="100">
        <p style="font-family:'Bebas Neue',sans-serif;font-size:38px;letter-spacing:2px;color:var(--heading-color);margin-bottom:8px;">120+ cours offerts</p>
        <p style="font-size:15px;color:var(--default-color);opacity:.75;line-height:1.8;">Chaque département offre plusieurs filières adaptées — universitaire, collégial, essentiel ou ouvert.</p>
        <p style="font-size:13px;color:var(--default-color);opacity:.5;margin-top:12px;"><i class="bi bi-arrow-right me-1"></i> Flèche = cours préalable requis &nbsp;&nbsp; Pas de flèche = aucun préalable</p>
      </div>
    </div>
  </div>
</section>

<!-- BROWSER -->
<section class="cours-section">
  <div style="text-align:center;margin-bottom:28px;" data-aos="fade-up">
    <p style="font-family:'Bebas Neue',sans-serif;font-size:36px;letter-spacing:2px;color:var(--heading-color);margin-bottom:4px;">Parcours par matière</p>
    <p style="font-size:14px;color:var(--default-color);opacity:.6;">Sélectionnez une matière pour voir les cours disponibles</p>
  </div>

  <div class="subject-nav" data-aos="fade-up" data-aos-delay="50">
    <button class="subject-tab active" onclick="showSubject('sciences',this)"><i class="bi bi-flask-fill"></i> Sciences</button>
    <button class="subject-tab" onclick="showSubject('francais',this)"><i class="bi bi-chat-quote-fill"></i> Français</button>
    <button class="subject-tab" onclick="showSubject('anglais',this)"><i class="bi bi-translate"></i> Anglais</button>
    <button class="subject-tab" onclick="showSubject('maths',this)"><i class="bi bi-calculator-fill"></i> Mathématiques</button>
    <button class="subject-tab" onclick="showSubject('eps',this)"><i class="bi bi-heart-pulse-fill"></i> Éd. Physique &amp; Santé</button>
    <button class="subject-tab" onclick="showSubject('info',this)"><i class="bi bi-cpu-fill"></i> Informatique</button>
    <button class="subject-tab" onclick="showSubject('affaires',this)"><i class="bi bi-briefcase-fill"></i> Affaires</button>
    <button class="subject-tab" onclick="showSubject('sociales',this)"><i class="bi bi-people-fill"></i> Sciences humaines</button>
    <button class="subject-tab" onclick="showSubject('mondiales',this)"><i class="bi bi-globe2"></i> Études canadiennes</button>
    <button class="subject-tab" onclick="showSubject('arts',this)"><i class="bi bi-palette-fill"></i> Arts</button>
  </div>

  <!-- ════ SCIENCES ════ -->
  <div class="subject-panel active" id="panel-sciences">
    <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>
    <div class="pathway-wrap" id="wrap-sciences">
      <svg class="pathway-svg" id="svg-sciences"></svg>

      <!-- Pré-Universitaire -->
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u"><i class="bi bi-mortarboard-fill me-1"></i>Pré-Universitaire</span></div></div>
      <!-- Row 1: empty — 11e/12e courses start here -->
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="SBI3U"><span class="pcode">SBI3U</span><span class="pname">Biologie</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="SBI4U"><span class="pcode">SBI4U</span><span class="pname">Biologie</span></div></div>
      </div>
      <!-- Row 2: SNC1W + SNC2D drop down here -->
      <div class="pathway-row no-border tight">
        <div class="cell cu"><div class="pill" data-pid="SNC1W"><span class="pcode">SNC1W</span><span class="pname">Sciences</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="SNC2D"><span class="pcode">SNC2D</span><span class="pname">Sciences</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="SCH3U"><span class="pcode">SCH3U</span><span class="pname">Chimie</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="SCH4U"><span class="pcode">SCH4U</span><span class="pname">Chimie</span></div></div>
      </div>
      <!-- Row 3: SPH3U/SPH4U -->
      <div class="pathway-row no-border tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="SPH3U"><span class="pcode">SPH3U</span><span class="pname">Physique</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="SPH4U"><span class="pcode">SPH4U</span><span class="pname">Physique</span></div></div>
      </div>
      <div class="pathway-row tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="SES4U"><span class="pcode">SES4U</span><span class="pname">Sciences de la Terre</span></div></div>
      </div>

      <!-- Pré-Collégiale -->
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c"><i class="bi bi-building me-1"></i>Pré-Collégiale</span></div></div>
      <!-- Row 1: SBI3C only -->
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="SBI3C"><span class="pcode">SBI3C</span><span class="pname">Biologie</span></div></div>
        <div class="cell-empty"></div>
      </div>
      <!-- Row 2: empty -->
      <div class="pathway-row no-border tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
      </div>
      <!-- Row 3: SNC1W + SNC2P drop down here, SCH4C in col4 -->
      <div class="pathway-row no-border tight">
        <div class="cell cc"><div class="pill" data-pid="SNC1W_c"><span class="pcode">SNC1W</span><span class="pname">Sciences</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="SNC2P"><span class="pcode">SNC2P</span><span class="pname">Sciences</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="SCH4C"><span class="pcode">SCH4C</span><span class="pname">Chimie</span></div></div>
      </div>
      <div class="pathway-row no-border tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="SPH4C"><span class="pcode">SPH4C</span><span class="pname">Physique</span></div></div>
      </div>
    </div>
  </div>
    </div>
  </div>

  <!-- ════ FRANÇAIS ════ -->
  <div class="subject-panel" id="panel-francais">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-francais">
      <svg class="pathway-svg" id="svg-francais"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u"><i class="bi bi-mortarboard-fill me-1"></i>Pré-Universitaire</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cu"><div class="pill" data-pid="FRL1W_u"><span class="pcode">FRL1W</span><span class="pname">Français</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="FRA2D"><span class="pcode">FRA2D</span><span class="pname">Français</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="FRA3U"><span class="pcode">FRA3U</span><span class="pname">Français</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="FRA4U"><span class="pcode">FRA4U</span><span class="pname">Français</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c"><i class="bi bi-building me-1"></i>Pré-Collégiale</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cc"><div class="pill" data-pid="FRL1W_c"><span class="pcode">FRL1W</span><span class="pname">Français</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="FRA2P"><span class="pcode">FRA2P</span><span class="pname">Français</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="FRA3C"><span class="pcode">FRA3C</span><span class="pname">Français</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="FRA4C"><span class="pcode">FRA4C</span><span class="pname">Français</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o"><i class="bi bi-globe me-1"></i>Optionnel</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="LWSBD"><span class="pcode">LWSBD</span><span class="pname">Espagnol</span></div></div>
        <div class="cell-empty"></div>
      </div>
    </div>
  </div>

  <!-- ════ ANGLAIS ════ -->
  <div class="subject-panel" id="panel-anglais">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-anglais">
      <svg class="pathway-svg" id="svg-anglais"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u"><i class="bi bi-mortarboard-fill me-1"></i>Pré-Universitaire</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cu"><div class="pill" data-pid="EAE1D"><span class="pcode">EAE1D</span><span class="pname">English</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="EAE2D"><span class="pcode">EAE2D</span><span class="pname">English</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="EAE3U"><span class="pcode">EAE3U</span><span class="pname">English</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="EAE4U"><span class="pcode">EAE4U</span><span class="pname">English</span></div></div>
      </div>
      <div class="pathway-row no-border tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="EAC4U"><span class="pcode">EAC4U</span><span class="pname">Writers Craft</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c"><i class="bi bi-building me-1"></i>Pré-Collégiale</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cc"><div class="pill" data-pid="EAE1D_c"><span class="pcode">EAE1D</span><span class="pname">English</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="EAE2P"><span class="pcode">EAE2P</span><span class="pname">English</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="EAE3C"><span class="pcode">EAE3C</span><span class="pname">English</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="EAE4C"><span class="pcode">EAE4C</span><span class="pname">English</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o"><i class="bi bi-globe me-1"></i>Ouvert</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="EANAO"><span class="pcode">EANAO</span><span class="pname">Anglais</span></div></div>
        <div class="cell co"><div class="pill" data-pid="EANBO"><span class="pcode">EANBO</span><span class="pname">Anglais débutant</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
      </div>
    </div>
  </div>

  <!-- ════ MATHÉMATIQUES ════ -->
  <div class="subject-panel" id="panel-maths">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-maths">
      <svg class="pathway-svg" id="svg-maths"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u"><i class="bi bi-mortarboard-fill me-1"></i>Pré-Universitaire</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cu"><div class="pill" data-pid="MTH1W"><span class="pcode">MTH1W</span><span class="pname">Mathématiques</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="MDM2D"><span class="pcode">MDM2D</span><span class="pname">Mathématiques</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="MCR3U"><span class="pcode">MCR3U</span><span class="pname">Fonctions</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="MCV4U"><span class="pcode">MCV4U</span><span class="pname">Vecteurs</span></div></div>
      </div>
      <!-- MHF4U can come from MCR3U; MDM4U can come from MCR3U OR MDM2D -->
      <div class="pathway-row no-border tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="MHF4U"><span class="pcode">MHF4U</span><span class="pname">Fonctions avancées</span></div></div>
      </div>
      <div class="pathway-row tight">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="MDM4U"><span class="pcode">MDM4U</span><span class="pname">Gestion des données</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c"><i class="bi bi-building me-1"></i>Pré-Collégiale</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cc"><div class="pill" data-pid="MTH1W_c"><span class="pcode">MTH1W</span><span class="pname">Mathématiques</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="MPM2P"><span class="pcode">MPM2P</span><span class="pname">Mathématiques</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="MCF3M"><span class="pcode">MCF3M</span><span class="pname">Fonctions</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="MAP4C"><span class="pcode">MAP4C</span><span class="pname">Méthodes</span></div></div>
      </div>
    </div>
  </div>

  <!-- ════ ÉD. PHYSIQUE ════ -->
  <div class="subject-panel" id="panel-eps">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-eps">
      <svg class="pathway-svg" id="svg-eps"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Activités en groupes (PAL)</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="PAL1O"><span class="pcode">PAL1O</span><span class="pname">Activités en groupes</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAL2O"><span class="pcode">PAL2O</span><span class="pname">Activités en groupes</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAL3O"><span class="pcode">PAL3O</span><span class="pname">Activités en groupes</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAL4O"><span class="pcode">PAL4O</span><span class="pname">Activités en groupes</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Vie active &amp; Santé (PPL)</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="PPL1O"><span class="pcode">PPL1O</span><span class="pname">Vie active &amp; Santé</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="PPL3O"><span class="pcode">PPL3O</span><span class="pname">Vie active &amp; Santé</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PPL4O"><span class="pcode">PPL4O</span><span class="pname">Vie active &amp; Santé</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Conditionnement (PAF)</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="PAF1O"><span class="pcode">PAF1O</span><span class="pname">Conditionnement</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAF2O"><span class="pcode">PAF2O</span><span class="pname">Conditionnement</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAF3O"><span class="pcode">PAF3O</span><span class="pname">Conditionnement</span></div></div>
        <div class="cell co"><div class="pill" data-pid="PAF4O"><span class="pcode">PAF4O</span><span class="pname">Conditionnement</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c">Soins de santé &amp; Kinésiologie</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="TPJ2O"><span class="pcode">TPJ2O</span><span class="pname">Soins de santé</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TPJ3M"><span class="pcode">TPJ3M</span><span class="pname">Soins de santé</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="PSK4U"><span class="pcode">PSK4U</span><span class="pname">Kinésiologie</span></div></div>
      </div>
    </div>
  </div>

  <!-- ════ INFORMATIQUE ════ -->
  <div class="subject-panel" id="panel-info">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-info">
      <svg class="pathway-svg" id="svg-info"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Ingénierie informatique</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cu"><div class="pill" data-pid="MHS_u"><span class="pcode">MHS</span><span class="pname">Ingénierie info.</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="ICD2O"><span class="pcode">ICD2O</span><span class="pname">Informatique</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="ICS3"><span class="pcode">ICS3C/U</span><span class="pname">Programmation</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="ICS4"><span class="pcode">ICS4C/U</span><span class="pname">Programmation</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c">Systèmes informatiques</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cc"><div class="pill" data-pid="MHS_c"><span class="pcode">MHS</span><span class="pname">Info. appliquée</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TEJ12"><span class="pcode">TEJ1O / TEJ2O</span><span class="pname">Systèmes info.</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TEJ3M"><span class="pcode">TEJ3M</span><span class="pname">Systèmes info.</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TEJ4M"><span class="pcode">TEJ4M</span><span class="pname">Systèmes info.</span></div></div>
      </div>
    </div>
  </div>

  <!-- ════ AFFAIRES ════ -->
  <div class="subject-panel" id="panel-affaires">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-affaires">
      <svg class="pathway-svg" id="svg-affaires"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Comptabilité &amp; Gestion</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cu"><div class="pill" data-pid="BEM_u"><span class="pcode">BEM1O / BEP2O</span><span class="pname">Exploration affaires</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="BAF3M"><span class="pcode">BAF3M</span><span class="pname">Comptabilité</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="BAT4M"><span class="pcode">BAT4M</span><span class="pname">Comptabilité</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c">Marketing</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell cc"><div class="pill" data-pid="BEM_c"><span class="pcode">BEM1O / BEP2O</span><span class="pname">Exploration affaires</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="BMI3C"><span class="pcode">BMI3C</span><span class="pname">Marketing</span></div></div>
        <div class="cell-empty"></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">TIC en affaires &amp; Gestion</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="BTA3O"><span class="pcode">BTA3O</span><span class="pname">TIC en affaires</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="BOH4M"><span class="pcode">BOH4M</span><span class="pname">Principe de gestion</span></div></div>
      </div>
    </div>
  </div>

  <!-- ════ SCIENCES HUMAINES ════ -->
  <div class="subject-panel" id="panel-sociales">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-sociales">
      <svg class="pathway-svg" id="svg-sociales"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Psychologie &amp; Philosophie</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="HSP3U"><span class="pcode">HSP3U</span><span class="pname">Psychologie</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="HZT4U"><span class="pcode">HZT4U</span><span class="pname">Philosophie</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Alimentation &amp; Nutrition</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="HFN1O"><span class="pcode">HFN1O</span><span class="pname">Alimentation</span></div></div>
        <div class="cell co"><div class="pill" data-pid="HFN2O"><span class="pcode">HFN2O</span><span class="pname">Alimentation</span></div></div>
        <div class="cell co"><div class="pill" data-pid="HFC3M"><span class="pcode">HFC3M</span><span class="pname">Alimentation</span></div></div>
        <div class="cell co"><div class="pill" data-pid="HFA4"><span class="pcode">HFA4C/4U</span><span class="pname">Nutrition</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c">Hôtellerie</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="TFJ2O"><span class="pcode">TFJ2O</span><span class="pname">Hôtellerie</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TFJ3C"><span class="pcode">TFJ3C</span><span class="pname">Hôtellerie</span></div></div>
        <div class="cell cc"><div class="pill" data-pid="TFJ4C"><span class="pcode">TFJ4C</span><span class="pname">Hôtellerie</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Leadership</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="PLF4M"><span class="pcode">PLF4M</span><span class="pname">Leadership récréatif</span></div></div>
      </div>
    </div>
  </div>

  <!-- ════ ÉTUDES CANADIENNES ════ -->
  <div class="subject-panel" id="panel-mondiales">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-mondiales">
      <svg class="pathway-svg" id="svg-mondiales"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Géographie &amp; Environnement</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="GCG1W"><span class="pcode">GCG1W</span><span class="pname">Géographie</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="GCG3O"><span class="pcode">GCG3O</span><span class="pname">Voyages &amp; Tourisme</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="CGU4M"><span class="pcode">CGU4M</span><span class="pname">Environnement urbain</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Histoire — Filière D</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="CHC2D"><span class="pcode">CHC2D</span><span class="pname">Histoire du Canada</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="CHT3O"><span class="pcode">CHT3O</span><span class="pname">Histoire depuis 1900</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="CHY4U"><span class="pcode">CHY4U</span><span class="pname">Histoire du monde</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-c">Histoire — Filière P</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell cc"><div class="pill" data-pid="CHC2P"><span class="pcode">CHC2P</span><span class="pname">Histoire du Canada</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-u">Droit</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
        <div class="cell cu"><div class="pill" data-pid="CLU3M"><span class="pcode">CLU3M</span><span class="pname">Droit</span></div></div>
        <div class="cell cu"><div class="pill" data-pid="CLN4U"><span class="pcode">CLN4U</span><span class="pname">Droit canadien &amp; mondial</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Civisme &amp; Politique</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="CHV2O"><span class="pcode">CHV2O</span><span class="pname">Citoyenneté</span></div></div>
        <div class="cell co"><div class="pill" data-pid="CPC3O"><span class="pcode">CPC3O</span><span class="pname">Politique en action</span></div></div>
        <div class="cell-empty"></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Carrière</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell-empty"></div>
        <div class="cell co"><div class="pill" data-pid="GLC2O"><span class="pcode">GLC2O</span><span class="pname">Carrière</span></div></div>
        <div class="cell-empty"></div>
        <div class="cell-empty"></div>
      </div>
    </div>
  </div>

  <!-- ════ ARTS ════ -->
  <div class="subject-panel" id="panel-arts">
        <div class="grade-header-row">
      <div class="grade-header"><span class="grade-label">9<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">10<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">11<sup>e</sup></span></div>
      <div class="grade-header"><span class="grade-label">12<sup>e</sup></span></div>
    </div>

    <div class="pathway-wrap" id="wrap-arts">
      <svg class="pathway-svg" id="svg-arts"></svg>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Arts visuels</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="AVI1O"><span class="pcode">AVI1O</span><span class="pname">Arts visuels</span></div></div>
        <div class="cell co"><div class="pill" data-pid="AVI2O"><span class="pcode">AVI2O</span><span class="pname">Arts visuels</span></div></div>
        <div class="cell co"><div class="pill" data-pid="AVI3M"><span class="pcode">AVI3M</span><span class="pname">Arts visuels</span></div></div>
        <div class="cell co"><div class="pill" data-pid="AVI4M"><span class="pcode">AVI4M</span><span class="pname">Arts visuels</span></div></div>
      </div>
      <div class="path-spacer"></div>
      <div class="pathway-row"><div class="pathway-label-row"><span class="pbadge pb-o">Arts intégrés &amp; Médiatiques</span></div></div>
      <div class="pathway-row no-border">
        <div class="cell co"><div class="pill" data-pid="ASM1O"><span class="pcode">ASM1O</span><span class="pname">Arts intégrés</span></div></div>
        <div class="cell co"><div class="pill" data-pid="ASM2O"><span class="pcode">ASM2O</span><span class="pname">Arts intégrés</span></div></div>
        <div class="cell co"><div class="pill" data-pid="ASM3M"><span class="pcode">ASM3M</span><span class="pname">Arts médiatiques</span></div></div>
        <div class="cell-empty"></div>
      </div>
    </div>
  </div>

</section>

</main>
<div id="footer-placeholder"></div>
<script src="assets/js/include-footer.js"></script>
<a class="scroll-top d-flex align-items-center justify-content-center" href="#" id="scroll-top"><i class="bi bi-arrow-up-short"></i></a>
<div id="preloader"></div>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/aos/aos.js"></script>
<script src="assets/js/main.js"></script>
<script>
// ── Subject tab switching ──────────────────────────────────────────────────
function showSubject(id, btn) {
  document.querySelectorAll('.subject-tab').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.subject-panel').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  const panel = document.getElementById('panel-' + id);
  panel.classList.add('active');
  panel.scrollIntoView({ behavior:'smooth', block:'nearest' });
  // Redraw arrows for the newly visible panel
  requestAnimationFrame(() => drawAllArrows(id));
}

// ── SVG arrow drawing ─────────────────────────────────────────────────────
// Each entry: { svg: 'svgId', wrap: 'wrapId', arrows: [[fromPid, toPid, color], ...] }
// Arrow definitions.
// Simple pair:  ['from', 'to', 'color']
// Fan (1→many): ['from', ['to1','to2','to3'], 'color']  — draws a clean Y-trunk then branches
const ARROW_DEFS = {
  sciences: [
    ['SNC1W','SNC2D','#1976d2'],
    // SNC2D fans out to three 11e courses — drawn as one trunk + three branches
    ['SNC2D', ['SBI3U','SCH3U','SPH3U'], '#1976d2'],
    ['SBI3U','SBI4U','#1976d2'],
    ['SCH3U','SCH4U','#1976d2'],
    ['SPH3U','SPH4U','#1976d2'],
    ['SNC1W_c','SNC2P','#388e3c'],
    // SNC2P fans to SBI3C, SCH4C, SPH4C — trunk stops before SBI3C column to avoid overlap
    ['SNC2P', ['SBI3C','SCH4C','SPH4C'], '#388e3c'],
  ],
  francais: [
    ['FRL1W_u','FRA2D','#1976d2'],['FRA2D','FRA3U','#1976d2'],['FRA3U','FRA4U','#1976d2'],
    ['FRL1W_c','FRA2P','#388e3c'],['FRA2P','FRA3C','#388e3c'],['FRA3C','FRA4C','#388e3c'],
    ['EANAO','EANBO','#e65100'],
  ],
  anglais: [
    ['EAE1D','EAE2D','#1976d2'],['EAE2D','EAE3U','#1976d2'],['EAE3U','EAE4U','#1976d2'],
    ['EAE3U','EAC4U','#1976d2'],
    ['EAE1D_c','EAE2P','#388e3c'],['EAE2P','EAE3C','#388e3c'],['EAE3C','EAE4C','#388e3c'],
    ['EANAO','EANBO','#e65100'],
  ],
  maths: [
    ['MTH1W','MDM2D','#1976d2'],['MDM2D','MCR3U','#1976d2'],['MCR3U','MCV4U','#1976d2'],
    ['MCR3U','MHF4U','#1976d2'],
    // MDM4U has TWO prereqs: MCR3U and MDM2D
    ['MCR3U','MDM4U','#1976d2'],['MDM2D','MDM4U','#1976d2'],
    ['MTH1W_c','MPM2P','#388e3c'],['MPM2P','MCF3M','#388e3c'],['MCF3M','MAP4C','#388e3c'],
  ],
  eps: [
    ['PAL1O','PAL2O','#e65100'],['PAL2O','PAL3O','#e65100'],['PAL3O','PAL4O','#e65100'],
    ['PPL1O','PPL3O','#e65100'],['PPL3O','PPL4O','#e65100'],
    ['PAF1O','PAF2O','#e65100'],['PAF2O','PAF3O','#e65100'],['PAF3O','PAF4O','#e65100'],
    ['TPJ2O','TPJ3M','#388e3c'],['TPJ3M','PSK4U','#1976d2'],
  ],
  info: [
    ['MHS_u','ICD2O','#1976d2'],['ICD2O','ICS3','#1976d2'],['ICS3','ICS4','#1976d2'],
    ['MHS_c','TEJ12','#388e3c'],['TEJ12','TEJ3M','#388e3c'],['TEJ3M','TEJ4M','#388e3c'],
  ],
  affaires: [
    ['BEM_u','BAF3M','#1976d2'],['BAF3M','BAT4M','#1976d2'],
    ['BEM_c','BMI3C','#388e3c'],
    ['BTA3O','BOH4M','#1976d2'],
  ],
  sociales: [
    ['HSP3U','HZT4U','#1976d2'],
    ['HFN1O','HFN2O','#e65100'],['HFN2O','HFC3M','#e65100'],['HFC3M','HFA4','#e65100'],
    ['TFJ2O','TFJ3C','#388e3c'],['TFJ3C','TFJ4C','#388e3c'],
  ],
  mondiales: [
    ['GCG1W','GCG3O','#e65100'],['GCG3O','CGU4M','#1976d2'],
    ['CHC2D','CHT3O','#1976d2'],['CHT3O','CHY4U','#1976d2'],
    ['CLU3M','CLN4U','#1976d2'],
    ['CHV2O','CPC3O','#e65100'],
  ],
  arts: [
    ['AVI1O','AVI2O','#e65100'],['AVI2O','AVI3M','#e65100'],['AVI3M','AVI4M','#e65100'],
    ['ASM1O','ASM2O','#e65100'],['ASM2O','ASM3M','#e65100'],
  ],
};

function getPillRect(pid, wrapEl) {
  const pill = wrapEl.querySelector(`[data-pid="${pid}"]`);
  if (!pill) return null;
  const pRect = pill.getBoundingClientRect();
  const wRect = wrapEl.getBoundingClientRect();
  return {
    left:   pRect.left - wRect.left,
    right:  pRect.right - wRect.left,
    top:    pRect.top - wRect.top,
    bottom: pRect.bottom - wRect.top,
    midY:   pRect.top - wRect.top + pRect.height / 2,
  };
}

function makePath(svg, d, color) {
  const safeId = color.replace('#','c');
  const p = document.createElementNS('http://www.w3.org/2000/svg','path');
  p.setAttribute('d', d);
  p.setAttribute('stroke', color);
  p.setAttribute('stroke-width', '2');
  p.setAttribute('fill', 'none');
  p.setAttribute('stroke-opacity', '0.75');
  p.setAttribute('marker-end', `url(#arrow-${safeId})`);
  svg.appendChild(p);
}

function makeLine(svg, d, color) {
  // Line without arrowhead (trunk of a fan)
  const p = document.createElementNS('http://www.w3.org/2000/svg','path');
  p.setAttribute('d', d);
  p.setAttribute('stroke', color);
  p.setAttribute('stroke-width', '2');
  p.setAttribute('fill', 'none');
  p.setAttribute('stroke-opacity', '0.75');
  svg.appendChild(p);
}

function drawArrows(subjectId) {
  const defs = ARROW_DEFS[subjectId];
  if (!defs) return;
  const wrapEl = document.getElementById('wrap-' + subjectId);
  const svg    = document.getElementById('svg-' + subjectId);
  if (!wrapEl || !svg) return;

  const wRect = wrapEl.getBoundingClientRect();
  svg.setAttribute('viewBox', `0 0 ${wRect.width} ${wRect.height}`);
  svg.setAttribute('width',  wRect.width);
  svg.setAttribute('height', wRect.height);
  svg.innerHTML = '';

  // Build arrowhead markers for every unique colour
  const svgDefs = document.createElementNS('http://www.w3.org/2000/svg','defs');
  const colors = [...new Set(defs.map(d => d[2]))];
  colors.forEach(color => {
    const safeId = color.replace('#','c');
    const marker = document.createElementNS('http://www.w3.org/2000/svg','marker');
    marker.setAttribute('id',          'arrow-' + safeId);
    marker.setAttribute('viewBox',     '0 0 8 8');
    marker.setAttribute('refX',        '7');
    marker.setAttribute('refY',        '4');
    marker.setAttribute('markerWidth', '6');
    marker.setAttribute('markerHeight','6');
    marker.setAttribute('orient',      'auto');
    const head = document.createElementNS('http://www.w3.org/2000/svg','path');
    head.setAttribute('d',    'M0,0 L8,4 L0,8 Z');
    head.setAttribute('fill', color);
    marker.appendChild(head);
    svgDefs.appendChild(marker);
  });
  svg.appendChild(svgDefs);

  defs.forEach(([fromId, toIds, color]) => {
    const from = getPillRect(fromId, wrapEl);
    if (!from) return;

    // ── Simple pair: toIds is a string ───────────────────────────────────
    if (typeof toIds === 'string') {
      const to = getPillRect(toIds, wrapEl);
      if (!to) return;
      const x1 = from.right, y1 = from.midY;
      const x2 = to.left,    y2 = to.midY;
      const mx = x1 + (x2 - x1) * 0.5;
      makePath(svg, `M${x1},${y1} C${mx},${y1} ${mx},${y2} ${x2},${y2}`, color);
      return;
    }

    // ── Fan: toIds is an array ────────────────────────────────────────────
    const targets = toIds.map(id => getPillRect(id, wrapEl)).filter(Boolean);
    if (!targets.length) return;

    // Find the leftmost target edge (where the trunk should reach)
    const trunkX = Math.min(...targets.map(t => t.left));

    // Trunk goes from source right-edge to a vertical bar at trunkX - gap
    const gap    = 16;                         // gap between trunk and pill left edge
    const barX   = trunkX - gap;
    const srcX   = from.right;
    const srcY   = from.midY;

    // Midpoint for the horizontal trunk curve
    const midX   = srcX + (barX - srcX) * 0.5;

    // Vertical span of all targets
    const topY    = Math.min(...targets.map(t => t.midY));
    const botY    = Math.max(...targets.map(t => t.midY));
    const centerY = (topY + botY) / 2;

    // Draw trunk: source → vertical bar (centered on targets)
    makeLine(svg,
      `M${srcX},${srcY} C${midX},${srcY} ${midX},${centerY} ${barX},${centerY}`,
      color
    );

    // Draw vertical spine connecting all branches
    if (targets.length > 1) {
      makeLine(svg, `M${barX},${topY} L${barX},${botY}`, color);
    }

    // Draw branch from bar to each target
    targets.forEach(to => {
      const bx = barX;
      const by = to.midY;
      const tx = to.left;
      const ty = to.midY;
      // Short horizontal branch with tight bezier
      makePath(svg,
        `M${bx},${by} C${bx + gap},${by} ${tx - gap},${ty} ${tx},${ty}`,
        color
      );
    });
  });
}

function drawAllArrows(subjectId) {
  if (subjectId) {
    drawArrows(subjectId);
  } else {
    // Draw for the currently active panel
    const active = document.querySelector('.subject-panel.active');
    if (active) {
      const id = active.id.replace('panel-','');
      drawArrows(id);
    }
  }
}

// Initial draw + redraw on resize
window.addEventListener('load', () => drawAllArrows());
window.addEventListener('resize', () => drawAllArrows());
</script>
</body>
</html>
