<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<script data-gage-theme-init="true">(function(){try{var t=localStorage.getItem("gage-theme");if(!t){t=(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)?"dark":"light";}if(t==="dark"){document.documentElement.classList.add("dark-mode");}}catch(e){}})();</script>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Volleyball — Garçons Senior | École secondaire Gaétan‑Gervais</title>
<link href="../assets/img/favicon.png" rel="icon"/>
<link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800&family=Poppins:ital,wght@0,400;0,500;0,600;0,700&family=Raleway:ital,wght@0,400;0,600;0,700;0,800&display=swap" rel="stylesheet"/>
<link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
<link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet"/>
<link href="../assets/vendor/aos/aos.css" rel="stylesheet"/>
<link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet"/>
<link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet"/>
<link href="../assets/css/main.css" rel="stylesheet"/>
<style>
  /* ── Section titles ── */
  .section-tab-title {
    font-family: var(--heading-font);
    font-weight: 700;
    font-size: 22px;
    color: var(--heading-color);
    border-left: 4px solid var(--accent-color);
    padding-left: 12px;
    margin-bottom: 20px;
  }
  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: var(--accent-color);
    font-weight: 600;
    text-decoration: none;
    font-size: 14px;
    margin-bottom: 12px;
  }
  .back-link:hover { text-decoration: underline; }

  /* ── Roster player cards ── */
  .roster-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: flex-start;
  }

  /* ── Standings ── */
  .standings-table th {
    background: var(--accent-color);
    color: var(--contrast-color);
    font-family: var(--heading-font);
    font-weight: 600;
    text-align: center;
    white-space: nowrap;
    padding: 10px 12px;
  }
  .standings-table td {
    text-align: center;
    vertical-align: middle;
    padding: 10px 12px;
  }
  .standings-table td:first-child { text-align: left; font-weight: 600; }
  .standings-table tbody tr:hover { background: color-mix(in srgb, var(--accent-color), transparent 93%); }
  .standings-table .my-school {
    background: color-mix(in srgb, var(--accent-color), transparent 88%);
    font-weight: 700;
  }
  .tier-badge {
    display: inline-block;
    background: var(--accent-color);
    color: var(--contrast-color);
    font-family: var(--heading-font);
    font-weight: 700;
    font-size: 13px;
    padding: 4px 14px;
    border-radius: 20px;
    margin-bottom: 16px;
  }
  .streak-w { color: #198754; font-weight: 700; }
  .streak-l { color: #dc3545; font-weight: 700; }

  /* ── Schedule / Scores ── */
  .schedule-table th {
    background: color-mix(in srgb, var(--accent-color), transparent 20%);
    color: var(--contrast-color);
    font-family: var(--heading-font);
    font-weight: 600;
    padding: 10px 14px;
  }
  .schedule-table td { vertical-align: middle; padding: 10px 14px; }
  .badge-win  { background: #198754; color:#fff; padding:3px 10px; border-radius:20px; font-size:12px; font-weight:600; }
  .badge-loss { background: #dc3545; color:#fff; padding:3px 10px; border-radius:20px; font-size:12px; font-weight:600; }
  .badge-upcoming { background: #6c757d; color:#fff; padding:3px 10px; border-radius:20px; font-size:12px; font-weight:600; }

  /* ── Loading / empty states ── */
  .data-loading { color: var(--default-color); opacity: 0.6; font-style: italic; }
  .updated-tag  { font-size: 12px; color: var(--default-color); opacity: 0.55; margin-top: 8px; }

  html.dark-mode .standings-table .my-school { background: color-mix(in srgb, var(--accent-color), transparent 80%); }
  html.dark-mode .standings-table tbody tr:hover { background: color-mix(in srgb, var(--accent-color), transparent 85%); }
  html.dark-mode .schedule-table th { color: #fff; }
</style>
</head>
<body class="starter-page-page">
<div id="header-placeholder"></div>
<script src="../assets/js/include-header.js"></script>
<main class="main">

  <div class="page-title" data-aos="fade">
    <div class="heading">
      <div class="container">
        <div class="row d-flex justify-content-center text-center">
          <div class="col-lg-8">
            <div style="font-size:48px;line-height:1;margin-bottom:10px;">
              <img src="../assets/img/sportslogos/volleyball.png" alt="Volleyball" style="width:64px;height:64px;object-fit:contain;"/>
            </div>
            <h1>Volleyball — Garçons Senior</h1>
            <p class="mb-0">Effectif, calendrier et classement HSSAA.</p>
          </div>
        </div>
      </div>
    </div>
    <nav class="breadcrumbs">
      <div class="container">
        <ol>
          <li><a href="../index.html">Accueil</a></li>
          <li><a href="../athletisme.html">Sports</a></li>
          <li class="current">Volleyball Garçons Senior</li>
        </ol>
      </div>
    </nav>
  </div>

  <section class="section">
    <div class="container" data-aos="fade-up">

      <a class="back-link" href="../athletisme.html"><i class="bi bi-arrow-left"></i> Retour aux sports</a>

      <!-- ══ EFFECTIF ══════════════════════════════════════════════════════ -->
      <div class="mb-5 mt-3">
        <p class="section-tab-title"><i class="bi bi-people-fill me-2"></i>Effectif</p>
        <div class="roster-grid" id="roster-container">
          <!--
            ═══════════════════════════════════════════════════════════════
            POUR METTRE À JOUR : Collez les cartes joueurs ici.
            Chaque carte est un bloc HTML autonome fourni par l'équipe.
            ═══════════════════════════════════════════════════════════════
          -->
          <p class="data-loading">Les cartes joueurs seront ajoutées ici.</p>
        </div>
      </div>

      <!-- ══ CALENDRIER & RÉSULTATS (auto HSSAA) ══════════════════════════ -->
      <div class="mb-5">
        <p class="section-tab-title"><i class="bi bi-calendar3 me-2"></i>Calendrier &amp; Résultats</p>
        <div id="scores-container">
          <p class="data-loading"><i class="bi bi-arrow-clockwise me-1"></i>Chargement des données HSSAA...</p>
        </div>
      </div>

      <!-- ══ CLASSEMENT (auto HSSAA) ═══════════════════════════════════════ -->
      <div class="mb-5">
        <p class="section-tab-title"><i class="bi bi-bar-chart-fill me-2"></i>Classement HSSAA</p>
        <div id="standings-container">
          <p class="data-loading"><i class="bi bi-arrow-clockwise me-1"></i>Chargement des données HSSAA...</p>
        </div>
      </div>

    </div>
  </section>

</main>
<div id="footer-placeholder"></div>
<script src="../assets/js/include-footer.js"></script>
<a class="scroll-top d-flex align-items-center justify-content-center" href="#" id="scroll-top"><i class="bi bi-arrow-up-short"></i></a>
<div id="preloader"></div>
<script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../assets/vendor/php-email-form/validate.js"></script>
<script src="../assets/vendor/aos/aos.js"></script>
<script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="../assets/vendor/purecounter/purecounter_vanilla.js"></script>
<script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="../assets/js/main.js"></script>

<script>
// ── Data file for this team ──────────────────────────────────────────────
const DATA_FILE = "../assets/data/sports/volleyball-garcons-senior.json";
const MY_SCHOOL_KEYWORDS = ["gaétan", "gervais", "gage", "g.g"];

// ── Render scores / schedule ─────────────────────────────────────────────
function renderScores(scores) {
  const container = document.getElementById("scores-container");
  if (!scores || scores.length === 0) {
    container.innerHTML = `<p class="data-loading">Aucun match enregistré pour l'instant.</p>`;
    return;
  }

  // Detect column count from first row
  const colCount = scores[0].length;
  let headerRow = "";
  if (colCount >= 5) {
    headerRow = `<tr><th>Date</th><th>Domicile</th><th>Score</th><th>Visiteur</th><th>Résultat</th></tr>`;
  } else {
    headerRow = `<tr>${scores[0].map(c => `<th>${c}</th>`).join("")}</tr>`;
  }

  const rows = scores.map(cells => {
    const result = cells[cells.length - 1] || "";
    let badge = `<span class="badge-upcoming">À venir</span>`;
    if (/win|victoire|w\b/i.test(result))  badge = `<span class="badge-win">Victoire</span>`;
    if (/loss|défaite|l\b/i.test(result))  badge = `<span class="badge-loss">Défaite</span>`;

    const tds = cells.slice(0, -1).map(c => `<td>${c}</td>`).join("");
    return `<tr>${tds}<td>${badge}</td></tr>`;
  });

  container.innerHTML = `
    <div class="table-responsive">
      <table class="table table-bordered schedule-table">
        <thead>${headerRow}</thead>
        <tbody>${rows.join("")}</tbody>
      </table>
    </div>`;
}

// ── Render standings ─────────────────────────────────────────────────────
function isMySchool(text) {
  const lower = text.toLowerCase();
  return MY_SCHOOL_KEYWORDS.some(k => lower.includes(k));
}

function renderStandings(standings, updated) {
  const container = document.getElementById("standings-container");
  if (!standings || standings.length === 0) {
    container.innerHTML = `<p class="data-loading">Aucun classement disponible pour l'instant.</p>`;
    return;
  }

  let html = "";
  standings.forEach(tier => {
    const rows = tier.rows.map(cells => {
      const mine = isMySchool(cells[0] || "");
      const tds  = cells.map((c, i) => {
        if (i === cells.length - 1) {
          // Streak column — colour it
          const isW = /^w/i.test(c);
          const isL = /^l/i.test(c);
          const cls = isW ? "streak-w" : isL ? "streak-l" : "";
          return `<td>${cls ? `<span class="${cls}">${c}</span>` : c}</td>`;
        }
        return `<td>${c}</td>`;
      }).join("");
      return `<tr class="${mine ? "my-school" : ""}">${tds}</tr>`;
    }).join("");

    html += `
      <span class="tier-badge">${tier.tier}</span>
      <div class="table-responsive mb-4">
        <table class="table table-bordered standings-table">
          <thead>
            <tr>
              <th>École</th><th>PJ</th><th>V</th><th>D</th><th>N</th>
              <th>PTS</th><th>WIN %</th><th>PF</th><th>PA</th><th>Série</th>
            </tr>
          </thead>
          <tbody>${rows}</tbody>
        </table>
      </div>`;
  });

  if (updated) {
    html += `<p class="updated-tag">
      Source : <a href="https://www.hssaa.ca/displayStandings.php?leagueid=26" target="_blank" rel="noopener">HSSAA</a>
      &mdash; Dernière mise à jour : ${updated}
    </p>`;
  }

  container.innerHTML = html;
}

// ── Load data from JSON ──────────────────────────────────────────────────
fetch(DATA_FILE)
  .then(r => r.json())
  .then(data => {
    renderScores(data.scores);
    renderStandings(data.standings, data.updated);
  })
  .catch(() => {
    document.getElementById("scores-container").innerHTML =
      `<p class="data-loading">Impossible de charger les données. Veuillez réessayer plus tard.</p>`;
    document.getElementById("standings-container").innerHTML =
      `<p class="data-loading">Impossible de charger les données. Veuillez réessayer plus tard.</p>`;
  });
</script>
</body>
</html>
